<!-- main body -->
<div class='basediv'>
    <!-- power, help -->
    <div class='power-row'>
        <div class='power' (click)="buttonpress('power'); powerOff()">
            <i class='material-icons'>power_settings_new</i>
        </div>
        <div class='help' (click)="buttonpress('help'); helpmodal.show()">
            <i class='material-icons'>help</i>
        </div>
    </div>


	<!-- display-selection -->
	<div *ngIf="multipledisplays" class='main-control-h'>
		<div class='display-selection'>
			<div *ngFor="let device of displays" [class.fadeout]="!(device === selectedDisplay) && !displayselection" (click)="goToSingleControl(device)">
				<div class='multi-circle-title'>
					<span>{{device.displayName}}</span>
				</div>
				<div class='multi-circle'>
					<i class='material-icons'>{{device.icon}}</i>
				</div>
			</div>
		</div>
	</div>
    <!-- display control -->
    <div [class.hidden]='displayselection' class='main-control-h'>
		<div class='roomname' [class.roomname-transition]="!selectedDisplay.blanked || true">
			<span *ngIf="!allcontrol">{{selectedDisplay.displayName}}</span>
			<span *ngIf="allcontrol">All Displays</span>
		</div>
        <div class='main-control-v' >
            <div class='circle' [class.circle-shrink]="!selectedDisplay.blanked || true">
				<i *ngIf="selectedDisplay.blanked" [@blankedIcon] class='material-icons'>panorama_wide_angle</i>
				<i *ngIf="!selectedDisplay.blanked" [@inputIcon] class='material-icons'>{{selectedDisplay.icon}}</i>
            </div>
            <ul #ring class="ring" [class.ring-grow]="!selectedDisplay.blanked || true">
				<li class="slice">
					<div>
					</div>
				</li>
				<li class="slice">
					<div>
					</div>
				</li>
                <li *ngFor="let i of inputs"  class="slice input-slice" [class.selectedInput]="selectedDisplay.input == i.name" (click)='switchInput(i)'>
					<div [style.right]="rightoffset" [style.top]="topoffset" class='input'>
						<i class='material-icons'>{{i.icon}}</i>
						<span>{{i.name}}</span>
					</div>
                </li>
            </ul>
        </div>
    </div>

	<!-- bottom-right control -->
    <div class='blank-row'>
		<!-- blank -->
		<div *ngIf="!selectedDisplay.blanked" class="blank" [class.alignleft]="!multipledisplays" (click)="buttonpress('blank'); blank()">
			<i class="material-icons">panorama_wide_angle</i>
		</div>
		<div *ngIf="selectedDisplay.blanked" class="blank" (click)="buttonpress('blank'); blank()">
			<i class="material-icons red">do_not_disturb</i>
		</div>
		<!-- all control -->
		<div *ngIf="multipledisplays" class="all-control">
			<i *ngIf="allcontrol || singlecontrol" class='material-icons' (click)="goToDisplaySelection()">group_work</i>
			<i *ngIf="!allcontrol && !singlecontrol" class='material-icons' (click)="goToSingleControl('all')">album</i>
		</div>
    </div>

	<!-- bottom left control -->



    <!-- sidebar -->
    <div class='column col-sm-1 sidebar'>
        <div class='volume'>
            <md-slider id="colored-slider" vertical [value]="volume" (change)="buttonpress('volume slider'); updateVolume($event.value)"></md-slider>
        </div>
        <div class="mute">
            <div *ngIf="muted" (click)="buttonpress('unmute'); toggleMute()">
                <i class="material-icons" [class.red]="muted">volume_off</i>
            </div>
            <div *ngIf="!muted" (click)="buttonpress('mute'); toggleMute()">
                <i class="material-icons" [class.red]="muted">volume_up</i>
            </div>
        </div>
    </div>

    <!-- slice of the circle -->
<svg id='svg-block' width="0" height="0">
  <defs>
    <clipPath clipPathUnits="objectBoundingBox" id="sector">
		<path fill="transparent" stroke="#111" stroke-width="1" id="sector" [attr.d]="arcpath"></path>
    </clipPath>
  </defs>
</svg>

</div>

<div class='overlay basediv' *ngIf="!showing" [@fadeInOut] (click)="buttonpress('power on'); enterScreen()">
    <img class='loading-img' [class.spinner]='!startSpinning' [class.spin_fast]='startSpinning' src='assets/byu_medallion_white.svg'>
</div>

<!-- management dialog -->
<div class="management basediv priority" *ngIf="!showing">
    <div class="top right" (click)="management(1)">
    </div>
    <div class="top left" (click)="management(3)">
    </div>
    <div class="bottom left" (click)="management(2)">
    </div>
    <div *ngIf="!man1 || !man2 || !man3" class="bottom right" (click)="management(4)">
    </div>
    <div *ngIf="man1 && man2 && man3" class="bottom right" (click)="management(4); managementmodal.show();">
    </div>
</div>


<!-- pop-ups -->
<app-modal #helpmodal>
    <div class="app-modal-body">
        <div class="modal-icon">
            <i class='material-icons helpdialog'>info_outline</i>
        </div>
        <div class="modal-title">
            Help
        </div>
        <div class="modal-body">
            <span>Please call AV Support at 801-422-7671 for help.</span>
        </div>
        <div class="modal-bottom">
            <button class="btn btn-primary" (click)="helpmodal.hide(); helprequested=false">Done</button>
			<button class="btn btn-warning" [disabled]="helprequested" (click)="requestHelp()">Request Help</button>
        </div>
    </div>
</app-modal>

<app-modal #managementmodal>
    <div class="app-modal-body">
        <div class="modal-title">
            Management
        </div>
        <div class="modal-body">
            <div class="management-body">
                <div>
                    <button class="btn btn-warning" (click)="refresh()">Refresh</button>
                </div>
                <div>
                    <button class="btn btn-info" (click)="deviceinfo(); deviceinfomodal.show()">Device Info</button>
                </div>
                <div>
                    <button class="btn btn-info" (click)="dockerstatus(); dockerstatusmodal.show()">Docker Status</button>
                </div>
                <div>
                    <button class="btn btn-danger" (click)="confirmrebootmodal.show()">Reboot</button>
                </div>
            </div>
        </div>
        <div class="modal-bottom">
            <button class="btn btn-primary" (click)="managementmodal.hide()">Done</button>
        </div>
    </div>
</app-modal>

<app-modal #deviceinfomodal>
    <div class="app-modal-body">
        <div class="modal-title">
            Device Info
        </div>
        <div class="modal-body">
            <div class="vert-align">
                <div *ngIf="deviceInfo.hostname">
                    <span>Hostname:</span>
                    <span>{{deviceInfo.hostname}}</span>
                </div>
                <div *ngIf="deviceInfo.ipaddress">
                    <span>IP Address:</span>
                    <span>{{deviceInfo.ipaddress}}</span>
                </div>
            </div>
        </div>
        <div class="modal-bottom">
            <button class="btn btn-primary" (click)="deviceinfomodal.hide()">Done</button>
        </div>
    </div>
</app-modal>

<app-modal #dockerstatusmodal>
    <div class="app-modal-body">
        <div class="modal-title">
            Docker Status
        </div>
        <div class="modal-body">
            <div *ngIf="dockerStatus" style="overflow: hidden;">
                <pre>{{dockerStatus}}</pre>
            </div>
        </div>
        <div class="modal-bottom">
            <button class="btn btn-primary" (click)="dockerstatusmodal.hide()">Done</button>
        </div>
    </div>
</app-modal>

<app-modal #confirmrebootmodal>
    <div class="app-modal-body">
        <div class="modal-icon">
            <i class='material-icons rebootdialog'>info_outline</i>
        </div>
        <div class="modal-title">
            Are you sure?
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-bottom">
            <button class="btn btn-danger" (click)="confirmrebootmodal.hide()">Cancel</button>
            <button class="btn btn-success" (click)="reboot()">Reboot</button>
        </div>
    </div>
</app-modal>
